<!DOCTYPE html>
<html>

<head>
  <title>ZampanioSimEastEast</title>
  <script src="dist/bundle.js"></script>
  <link rel="stylesheet" href="css/index.css">
  <link rel="stylesheet" href="css/transcript.css">
  <script>
 const createElementWithIdAndParent = (eleName, parent, id, className) => {
    const ele = createElementWithId(eleName, id, className);
    parent.append(ele);
    return ele;
}

 const createElementWithId = (eleName, id, className) => {
    const ele = document.createElement(eleName);
    if (id) {
        ele.id = id;
    }
    if (className) {
        ele.className = className;
    }
    return ele;

}

    window.onerror = (e) => {
      const storySoFar = document.querySelector(".story-so-far");
      const err = createElementWithIdAndParent("p", storySoFar, undefined, "error");
      err.title = "ERROR";
      err.innerHTML = e.toString();
      if(!window.errorCount){
        window.errorCount = 0;
      }
      window.errorCount ++;
    }
  </script>

</head>

<body>
  <div id="container">
    <div id="current-room">

    </div>
    <div class="player-container" id="story-container">
      <div class="story-so-far">
        <p>Loading...</p>
      </div>
      <div class="command">
        <form id="puppet-command" action="" method="post" style="display: inline-block;">
          <input id="puppet-input" autofocus  placeholder="Command Peewee">
          <button type="submit">Submit</button>
        </form>
      </div>
    </div>



  </div>
  <img id="rabbithole" src="images/rabbithole.png">

  <ul>

    * FRIEND gives out quests (find object with name of X, or theme of Y for example and bring to Quotidian with name of X (try to start shit))

    *if current room in maze changes, unattach all blorbos from it
* maze has list of all possible blorbos. when room changes, if it shares their theme, spawn them in it if they aren't dead
* quest giver, text only. asks you to obtain a Physical Object with certain traits in exchange for something useful. its just FRIEND
* if someone is within range of the Killer, they die
* eye killer runs away from everyone, unless someone gets too close, then they pursue
* add jr, jr only does gigglesnort in response to triggers (for example commenting on specific blorbos)
* if peewee dies, entire simulation resets (just flat out refresh the page)
* can put a physical object into your inventory (renderse it on the ai dungeon section)
* can take it back out of your inventory
* can use physical object on thing (cause reaction in blorbo?)
* stability levels and breech conditions
 
    * spawn the eye killer who flees AWAY (follow but negative?) from anyone and kills if anything touches her
    * if anything get too close she switches to chasing them


    * quotidians optionally have  a breach state with different art assets and AI (camille has no head or is just a head for example)
    * breaches happen if STABILITY COUNTER reaches zero
    * each quotidian has custom triggers that LOWER or RAISE their STABILITY COUNTER
    * eye killer doens't breech but innocent will turn into eye killer if eye killer is dead
    *if one of the twins dies, if the other is spawned, it Breaches (if its not it spawns AND breaches)

    *use window.errorCount to increase glitches and fractals

    stretch goal: keikaku sim.  For each action, create a simulation of what the world would look like after that action is taken.
    instead of picking a beat at random, or in order of priority, prefer beats that increase the amount of beats that can happen next turn
    (aka, the ones whose actions trigger actions next tick. )

    example:  eye killer wishes to kill The Cultist.  To do this, she must first pick the "follow cultist" story beat, 
    to get close enough to then pick the "stab in melee range" beat

    this would also mean that blorbos have simulations of the world that represent their goal states.

    i'd need to make mini simulation objects so that the world and the blorbos don't need to have graphics (good for testing, too)



    * if a room gets replaced (incl north) set the blorbos in it free
    * once processed, audio plays constantly, going in and out of volume, usually muted, sometimes almost unhearable,
    sometimes going up to full volume
    * and importantly, sometimes switching which of the files its looping

    * when enter a new room, chance any free blorbos will be there
    *peewee has a reaction storybeat where if he's close to an object he'll comment on it in some way. (looks X, smells
    X, tastes X, etc.)
    * mary king with her trecherous permit

    fractal rooms and fractal ai
    *find room for truth
    * find someway to link to //0: http://farragofiction.com/ParkerLotLost/

    * the longer you play, the more fractal things get, the more chaotic, till eventually the Merciful Nightingale
    spawns.

    * LONG TERM TODO spawn the eye killer who flees AWAY from peewee and kills if anything touches her
    * allow rooms nearby to tick, even if they aren't rendered. any tick originated from a neighbor room should mark
    itself as such on screen.
    (yes this means that blorbos may move through doors that don't exist in their rooms just because they DO exist in
    peewees, or interact with peewee's room in a weird ghost way. this is fine)



    * attic has protojrs
    *narratr is truth, obvs
    * why do some rooms lead to themselves?
    *
    * add a weird non-puppet peewee that doens't listen (bug i found) (arm2 peewee)

    * begin writing basic trigger/effect ai system so quotidians can randomly cycle between moving randomly, approaching
    peewee, and fleeing to doors

    * reaction system for peewee where he gets a lil ai of his own

    * peewee can pick up objects, has inventory you can check (visual , grid of icons of things he's picked up)

    * special effects if you grab an Artifact



    ** fractal spiraling graphic of the arms of Zampanio, possibly as part of the Attic for East East
    like practical guide to evil, AI can have IMPORTANT GOAL CARDS that they will 100% do if possible (things that lead
    to Plot). but all their other lil ai stuff might fuck with
    <li>* fractal spiraling graphic of the arms of Zampanio, possibly as part of the Attic for East East
    </li>

    <li>simple trigger effect ai engine , like quest engine. first trigger is "entity is in combat range" and first
      effect is "quip". (if a quotidian bumps into anything it comments on it) has a human readable version of trigger
      and effect, plus flavor for both (like quest engine) </li>
    <li>* pull in eye killers assets, render her on screen, she kills anything that gets close, but otherwise doens't
      move</li>
    <li>simple objects, same format as east (triggers are looking for words in either flavor text or name)</li>
    <li>quotidians move randomly, picking up objects</li>
    <li>StoryEngine, much like MazeStorySim. When an effect triggers, print out trigger/effect pair plus flavor text
      much like Quest engine. </li>
    <li>peewee is an ai like any other, but player issues commands. like "go north" or "go to bird", much like
      ThisIsAGame. or ai dungeon.</li>
    <li>peewees ai is STRICTLY for being sassy. popovers complaining about things, for example.</li>
  </ul>

  <p>
  <h1>Credits</h1>
  <p>(note, check <a href='http://www.farragofiction.com/ZampanioSimEast/'>East</a>'s Credits as well, since this builds
    off it)</p>
  <ul>
    <li>Writing and Coding: JR</li>
    <li>Writing and Music and Art: IC</li>
    <li>Peewee Sprite: KR</li>
    <li>9 Artifacts: Xexus</li>
    <li>Snail: https://forums.rpgmakerweb.com/index.php?threads/avys-mv-stuff.53317/page-74#post-1028957</li>
    <li>Literature Quotes: Jeff VanderMeer, Annihilation and Mark Z. Danielewski, House of Leaves </li>
  </ul>
  </p>

</body>

</html>